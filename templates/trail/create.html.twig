{% extends 'layouts/app.html.twig' %}

{% block title %}Create Trail - WellCare Connect{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('trail-css') }}
{% endblock %}

{% block body %}
{# Page Header #}
<div class="py-4 mb-4 -mx-4 -mt-4 bg-gradient-to-r from-wellcare-500 to-wellcare-light-500">
    <div class="px-4 mx-auto">
        <h1 class="mb-1 text-xl font-bold text-white font-display">
            <i class="mr-2 fa-solid fa-plus-circle"></i>Create New Trail
        </h1>
        <p class="text-sm text-white/80">Share your favorite trail with the community</p>
    </div>
</div>

{# Main Content #}
<div class="px-4 mx-auto">
    <!-- Progress Steps -->
    <div class="max-w-3xl mx-auto mb-6">
        <div class="flex items-center justify-between">
            <template x-for="(step, index) in steps" :key="index">
                <div class="flex items-center">
                    <div class="flex flex-col items-center">
                        <div class="flex items-center justify-center w-8 h-8 text-xs font-semibold transition-colors rounded-full"
                            :class="currentStep >= index + 1 ? 'bg-wellcare-500 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400'">
                            <template x-if="currentStep > index + 1">
                                <i class="fa-solid fa-check"></i>
                            </template>
                            <template x-if="currentStep <= index + 1">
                                <span x-text="index + 1"></span>
                            </template>
                        </div>
                        <span class="mt-1 text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap" x-text="step"></span>
                    </div>
                    <div class="w-12 h-0.5 mx-2 transition-colors"
                        :class="currentStep > index + 1 ? 'bg-wellcare-500' : 'bg-gray-200 dark:bg-gray-700'"
                        style="display: none;"></div>
                </div>
            </template>
        </div>
    </div>

    <!-- Form Container -->
    <div class="max-w-3xl mx-auto" x-data="trailWizard()">
        <!-- Step 1: Basic Info -->
        <div x-show="currentStep === 1" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0">
            <div class="p-6 bg-white border border-gray-100 shadow-sm dark:bg-gray-800 rounded-xl dark:border-gray-700">
                <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Basic Information</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Trail Name *</label>
                        <input type="text" placeholder="Enter trail name" 
                            class="w-full px-4 py-2.5 border border-gray-200 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-wellcare-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Description *</label>
                        <textarea rows="4" placeholder="Describe your trail..." 
                            class="w-full px-4 py-2.5 border border-gray-200 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-wellcare-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Location *</label>
                        <div class="relative">
                            <input type="text" placeholder="Trail location or address" 
                                class="w-full px-4 py-2.5 pl-10 border border-gray-200 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-wellcare-500 focus:border-transparent">
                            <i class="absolute text-gray-400 transform -translate-y-1/2 left-3 top-1/2 fa-solid fa-location-dot"></i>
                        </div>
                    </div>
                    
                    <div class="flex gap-2">
                        <button @click="getCurrentLocation()" class="px-3 py-2 text-xs font-medium rounded-lg text-wellcare-600 bg-wellcare-50 dark:bg-wellcare-900/30 dark:text-wellcare-400 hover:bg-wellcare-100">
                            <i class="mr-1 fa-solid fa-location-arrow"></i>Use Current Location
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2: Trail Details -->
        <div x-show="currentStep === 2" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0" style="display: none;">
            <div class="p-6 bg-white border border-gray-100 shadow-sm dark:bg-gray-800 rounded-xl dark:border-gray-700">
                <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Trail Details</h2>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Total Distance (km) *</label>
                        <input type="number" step="0.1" placeholder="5.0" 
                            class="w-full px-4 py-2.5 border border-gray-200 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-wellcare-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Estimated Duration *</label>
                        <input type="text" placeholder="1h 30m" 
                            class="w-full px-4 py-2.5 border border-gray-200 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-wellcare-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Elevation Gain (m)</label>
                        <input type="number" step="10" placeholder="150" 
                            class="w-full px-4 py-2.5 border border-gray-200 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-wellcare-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Difficulty *</label>
                        <select class="w-full px-4 py-2.5 border border-gray-200 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-wellcare-500 focus:border-transparent">
                            <option value="">Select difficulty</option>
                            <option value="easy">Easy - Suitable for all</option>
                            <option value="moderate">Moderate - Some fitness required</option>
                            <option value="hard">Hard - Experienced hikers only</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3: Amenities -->
        <div x-show="currentStep === 3" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0" style="display: none;">
            <div class="p-6 bg-white border border-gray-100 shadow-sm dark:bg-gray-800 rounded-xl dark:border-gray-700">
                <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Amenities & Features</h2>
                
                <div class="grid grid-cols-2 gap-3 mb-6">
                    <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700">
                        <input type="checkbox" class="w-4 h-4 rounded text-wellcare-500 focus:ring-wellcare-500">
                        <span class="ml-2 text-sm"><i class="mr-1 text-gray-400 fa-solid fa-restroom"></i>Restrooms</span>
                    </label>
                    <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700">
                        <input type="checkbox" class="w-4 h-4 rounded text-wellcare-500 focus:ring-wellcare-500">
                        <span class="ml-2 text-sm"><i class="mr-1 text-gray-400 fa-solid fa-parking"></i>Parking</span>
                    </label>
                    <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700">
                        <input type="checkbox" class="w-4 h-4 rounded text-wellcare-500 focus:ring-wellcare-500">
                        <span class="ml-2 text-sm"><i class="mr-1 text-gray-400 fa-solid fa-faucet"></i>Water Fountain</span>
                    </label>
                    <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700">
                        <input type="checkbox" class="w-4 h-4 rounded text-wellcare-500 focus:ring-wellcare-500">
                        <span class="ml-2 text-sm"><i class="mr-1 text-gray-400 fa-solid fa-utensils"></i>Picnic Area</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Step 4: Photos -->
        <div x-show="currentStep === 4" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0" style="display: none;">
            <div class="p-6 bg-white border border-gray-100 shadow-sm dark:bg-gray-800 rounded-xl dark:border-gray-700">
                <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Upload Photos</h2>
                
                <div class="p-8 text-center transition-colors border-2 border-gray-300 border-dashed cursor-pointer rounded-xl dark:border-gray-600 hover:border-wellcare-500">
                    <i class="mb-3 text-4xl text-gray-400 fa-solid fa-cloud-arrow-up"></i>
                    <p class="mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Drag & drop photos here</p>
                    <p class="mb-4 text-xs text-gray-500">or click to browse</p>
                    <button class="px-4 py-2 text-sm font-medium text-white rounded-lg bg-wellcare-500 hover:bg-wellcare-600">
                        Browse Files
                    </button>
                </div>

                <!-- Photo Preview -->
                <div class="mt-4">
                    <p class="mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Preview</p>
                    <div class="grid grid-cols-4 gap-2">
                        <div class="relative overflow-hidden bg-gray-100 rounded-lg aspect-square dark:bg-gray-700">
                            <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=200&h=200&fit=crop" class="object-cover w-full h-full">
                        </div>
                        <div class="relative overflow-hidden bg-gray-100 rounded-lg aspect-square dark:bg-gray-700">
                            <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=200&fit=crop" class="object-cover w-full h-full">
                        </div>
                        <div class="relative overflow-hidden bg-gray-100 rounded-lg aspect-square dark:bg-gray-700">
                            <img src="https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=200&h=200&fit=crop" class="object-cover w-full h-full">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 5: Preview & Publish -->
        <div x-show="currentStep === 5" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0" style="display: none;">
            <div class="overflow-hidden bg-white border border-gray-100 shadow-sm dark:bg-gray-800 rounded-xl dark:border-gray-700">
                <div class="relative h-48">
                    <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&h=300&fit=crop" class="object-cover w-full h-full">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    <div class="absolute text-white bottom-4 left-4">
                        <span class="px-2 py-0.5 text-xs font-medium bg-wellcare-500 rounded-full">Easy</span>
                        <h3 class="mt-2 text-xl font-bold">Forest Wellness Path</h3>
                        <p class="text-sm text-white/80"><i class="mr-1 fa-solid fa-location-dot"></i>Central Park, Downtown</p>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-3 gap-4 mb-4">
                        <div class="text-center">
                            <i class="mb-1 fa-solid fa-ruler text-wellcare-500"></i>
                            <p class="text-sm font-medium">5.2 km</p>
                            <p class="text-xs text-gray-500">Distance</p>
                        </div>
                        <div class="text-center">
                            <i class="mb-1 fa-solid fa-clock text-wellcare-500"></i>
                            <p class="text-sm font-medium">1h 30m</p>
                            <p class="text-xs text-gray-500">Duration</p>
                        </div>
                        <div class="text-center">
                            <i class="mb-1 fa-solid fa-mountain text-wellcare-500"></i>
                            <p class="text-sm font-medium">150m</p>
                            <p class="text-xs text-gray-500">Elevation</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-4 mb-4">
                        <span class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                            <i class="mr-1 fa-solid fa-star text-amber-400"></i> 4.9 (28 reviews)
                        </span>
                        <span class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                            <i class="mr-1 fa-solid fa-users text-wellcare-500"></i> 234 completions
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="flex justify-between mt-6">
            <button x-show="currentStep > 1" @click="currentStep--" 
                class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600">
                <i class="mr-1 fa-solid fa-arrow-left"></i> Previous
            </button>
            <div x-show="currentStep === 1" class="flex-1"></div>
            
            <button x-show="currentStep < 5" @click="currentStep++" 
                class="px-4 py-2 text-sm font-medium text-white rounded-lg bg-wellcare-500 hover:bg-wellcare-600">
                Next <i class="ml-1 fa-solid fa-arrow-right"></i>
            </button>
            <button x-show="currentStep === 5" 
                class="px-4 py-2 text-sm font-medium text-white bg-green-500 rounded-lg hover:bg-green-600">
                <i class="mr-1 fa-solid fa-check"></i> Publish Trail
            </button>
        </div>
    </div>
</div>

<script>
function trailWizard() {
    return {
        currentStep: 1,
        steps: ['Basic Info', 'Details', 'Amenities', 'Photos', 'Preview'],
        dragOver: false,
        getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    alert('Location: ' + position.coords.latitude.toFixed(4) + ', ' + position.coords.longitude.toFixed(4));
                });
            }
        }
    }
}
</script>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
{% endblock %}
