{% extends 'layouts/app.html.twig' %}

{% block title %}Community Publications - WellCare Connect{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('trail-css') }}
    {{ encore_entry_link_tags('trail-community-css') }}
{% endblock %}

{% block body %}
{# Page Header #}
<div class="py-4 mb-4 -mx-4 -mt-4 bg-gradient-to-r from-wellcare-dark-500 to-wellcare-500">
    <div class="px-4 mx-auto">
        <h1 class="text-xl font-bold text-white font-display">
            <i class="mr-2 fa-solid fa-users"></i>Community Publications
        </h1>
        <p class="text-sm text-white/80">Discover trail experiences from the community</p>
    </div>
</div>

{# Main Content #}
<div class="px-4 mx-auto" x-data="publicationFeed()">
    <div class="grid grid-cols-1 gap-4 lg:grid-cols-4">
        <!-- Main Feed -->
        <div class="space-y-4 lg:col-span-3">
            <!-- Sort & Filter -->
            <div class="flex flex-wrap items-center gap-2">
                <div class="flex p-1 bg-gray-100 rounded-lg dark:bg-gray-800">
                    <button @click="sortBy = 'recent'" 
                        class="px-3 py-1 text-xs font-medium transition rounded-md"
                        :class="sortBy === 'recent' ? 'bg-white dark:bg-gray-700 shadow-sm text-wellcare-500' : 'text-gray-500'">
                        <i class="mr-1 fa-solid fa-clock"></i>Recent
                    </button>
                    <button @click="sortBy = 'popular'" 
                        class="px-3 py-1 text-xs font-medium transition rounded-md"
                        :class="sortBy === 'popular' ? 'bg-white dark:bg-gray-700 shadow-sm text-wellcare-500' : 'text-gray-500'">
                        <i class="mr-1 fa-solid fa-fire"></i>Popular
                    </button>
                    <button @click="sortBy = 'rating'" 
                        class="px-3 py-1 text-xs font-medium transition rounded-md"
                        :class="sortBy === 'rating' ? 'bg-white dark:bg-gray-700 shadow-sm text-wellcare-500' : 'text-gray-500'">
                        <i class="mr-1 fa-solid fa-star"></i>Top Rated
                    </button>
                </div>
                <select class="px-2 py-1 text-xs border border-gray-200 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    <option value="all">All Trails</option>
                    <option value="forest">Forest Trails</option>
                    <option value="mountain">Mountain Trails</option>
                    <option value="coastal">Coastal Trails</option>
                </select>
            </div>

            <!-- Publication Card 1 -->
            <div class="overflow-hidden bg-white border border-gray-100 shadow-sm dark:bg-gray-800 rounded-xl dark:border-gray-700">
                <div class="p-4">
                    <div class="flex items-start gap-3">
                        <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop" alt="User" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium text-gray-900 dark:text-white">Sarah Johnson</p>
                                    <p class="text-xs text-gray-500">2 days ago • Forest Wellness Path</p>
                                </div>
                                <button class="text-gray-400 hover:text-gray-600">
                                    <i class="fa-solid fa-ellipsis"></i>
                                </button>
                            </div>
                            
                            <div class="flex items-center gap-3 my-2 text-xs">
                                <span class="flex items-center text-amber-500">
                                    <i class="mr-1 fa-solid fa-star"></i>5.0
                                </span>
                                <span class="flex items-center text-gray-500">
                                    <i class="mr-1 fa-solid fa-cloud-sun"></i>Sunny
                                </span>
                            </div>
                            
                            <p class="mb-3 text-sm text-gray-700 dark:text-gray-300">
                                Absolutely stunning trail! The forest canopy provides amazing shade, and the wildlife sightings were incredible. Saw deer and several bird species. Well-marked path and benches for resting. Highly recommend for families!
                            </p>
                            
                            <!-- Photos -->
                            <div class="grid grid-cols-3 gap-2 mb-3">
                                <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=200&h=150&fit=crop" class="object-cover w-full h-24 rounded-lg cursor-pointer hover:opacity-90">
                                <img src="https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=200&h=150&fit=crop" class="object-cover w-full h-24 rounded-lg cursor-pointer hover:opacity-90">
                                <img src="https://images.unsplash.com/photo-1501854140884-074cf27f70f9?w=200&h=150&fit=crop" class="object-cover w-full h-24 rounded-lg cursor-pointer hover:opacity-90">
                            </div>
                            
                            <!-- Actions -->
                            <div class="flex items-center gap-4 pt-3 border-t border-gray-100 dark:border-gray-700">
                                <button class="flex items-center gap-1 text-xs text-gray-500 hover:text-wellcare-500">
                                    <i class="fa-regular fa-thumbs-up"></i> <span>24</span>
                                </button>
                                <button class="flex items-center gap-1 text-xs text-gray-500 hover:text-wellcare-500">
                                    <i class="fa-regular fa-comment"></i> <span>5</span>
                                </button>
                                <button class="flex items-center gap-1 text-xs text-gray-500 hover:text-wellcare-500">
                                    <i class="fa-solid fa-share"></i> Share
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Publication Card 2 -->
            <div class="overflow-hidden bg-white border border-gray-100 shadow-sm dark:bg-gray-800 rounded-xl dark:border-gray-700">
                <div class="p-4">
                    <div class="flex items-start gap-3">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop" alt="User" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium text-gray-900 dark:text-white">Michael Chen</p>
                                    <p class="text-xs text-gray-500">5 days ago • Summit View Trail</p>
                                </div>
                                <button class="text-gray-400 hover:text-gray-600">
                                    <i class="fa-solid fa-ellipsis"></i>
                                </button>
                            </div>
                            
                            <div class="flex items-center gap-3 my-2 text-xs">
                                <span class="flex items-center text-amber-500">
                                    <i class="mr-1 fa-solid fa-star"></i>4.5
                                </span>
                                <span class="flex items-center text-gray-500">
                                    <i class="mr-1 fa-solid fa-cloud-sun"></i>Partly Cloudy
                                </span>
                            </div>
                            
                            <p class="mb-3 text-sm text-gray-700 dark:text-gray-300">
                                Challenging but rewarding hike! The panoramic views from the summit are worth every step. Trail is well-maintained with clear markers. Bring plenty of water and snacks. sunrise hikes are spectacular here.
                            </p>
                            
                            <!-- Actions -->
                            <div class="flex items-center gap-4 pt-3 border-t border-gray-100 dark:border-gray-700">
                                <button class="flex items-center gap-1 text-xs text-gray-500 hover:text-wellcare-500">
                                    <i class="fa-regular fa-thumbs-up"></i> <span>18</span>
                                </button>
                                <button class="flex items-center gap-1 text-xs text-gray-500 hover:text-wellcare-500">
                                    <i class="fa-regular fa-comment"></i> <span>3</span>
                                </button>
                                <button class="flex items-center gap-1 text-xs text-gray-500 hover:text-wellcare-500">
                                    <i class="fa-solid fa-share"></i> Share
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Load More -->
            <div class="text-center">
                <button class="px-6 py-2 text-sm rounded-lg text-wellcare-600 bg-wellcare-50 dark:bg-wellcare-900/30 dark:text-wellcare-400 hover:bg-wellcare-100">
                    <i class="mr-1 fa-solid fa-spinner animate-spin" x-show="loading"></i>
                    Load More Publications
                </button>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="space-y-4">
            <!-- Quick Actions -->
            <div class="p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-800 rounded-xl dark:border-gray-700">
                <h3 class="mb-3 font-semibold text-gray-900 dark:text-white">
                    <i class="mr-2 fa-solid fa-pen text-wellcare-500"></i>Share Your Experience
                </h3>
                <a href="/trail/publication/create" class="flex items-center justify-center gap-2 px-4 py-2 text-sm text-white rounded-lg bg-wellcare-500 hover:bg-wellcare-600">
                    <i class="fa-solid fa-camera"></i> Write a Review
                </a>
            </div>

            <!-- Top Contributors -->
            <div class="p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-800 rounded-xl dark:border-gray-700">
                <h3 class="mb-3 font-semibold text-gray-900 dark:text-white">
                    <i class="mr-2 fa-solid fa-trophy text-amber-500"></i>Top Contributors
                </h3>
                <div class="space-y-3">
                    <div class="flex items-center gap-3">
                        <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop" class="w-8 h-8 rounded-full">
                        <div>
                            <p class="text-xs font-medium text-gray-900 dark:text-white">Sarah Johnson</p>
                            <p class="text-xs text-gray-500">45 publications</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop" class="w-8 h-8 rounded-full">
                        <div>
                            <p class="text-xs font-medium text-gray-900 dark:text-white">Michael Chen</p>
                            <p class="text-xs text-gray-500">32 publications</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop" class="w-8 h-8 rounded-full">
                        <div>
                            <p class="text-xs font-medium text-gray-900 dark:text-white">Emily Davis</p>
                            <p class="text-xs text-gray-500">28 publications</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Popular Trails This Week -->
            <div class="p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-800 rounded-xl dark:border-gray-700">
                <h3 class="mb-3 font-semibold text-gray-900 dark:text-white">
                    <i class="mr-2 text-orange-500 fa-solid fa-fire"></i>Trending Trails
                </h3>
                <div class="space-y-2">
                    <a href="/trail/detail" class="block p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <p class="text-xs font-medium text-gray-900 dark:text-white">Forest Wellness Path</p>
                        <p class="text-xs text-gray-500">156 new reviews</p>
                    </a>
                    <a href="/trail/detail" class="block p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <p class="text-xs font-medium text-gray-900 dark:text-white">Summit View Trail</p>
                        <p class="text-xs text-gray-500">124 new reviews</p>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function publicationFeed() {
    return {
        sortBy: 'recent',
        loading: false,
        
        loadMore() {
            this.loading = true;
            setTimeout(() => {
                this.loading = false;
            }, 1000);
        }
    }
}
</script>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
{% endblock %}
