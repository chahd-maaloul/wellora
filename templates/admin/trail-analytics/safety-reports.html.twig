{% extends 'layouts/app.html.twig' %}

{% block title %}Safety Reports - WellCare Connect Admin{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('trail-analytics-css') }}
{% endblock %}

{% block body %}
<div class="py-4 mb-6 -mx-4 -mt-4 bg-gradient-to-r from-red-600 to-orange-600">
    <div class="px-4 mx-auto">
        <div class="flex flex-col items-start justify-between md:flex-row md:items-center">
            <div>
                <h1 class="mb-1 text-xl font-bold text-white font-display">
                    <i class="mr-2 fa-solid fa-shield-halved"></i>Safety Reports
                </h1>
                <p class="text-sm text-white/80">Monitor trail safety incidents and emergency alerts</p>
            </div>
            <div class="mt-4 md:mt-0">
                <button class="px-4 py-2 text-sm font-medium text-white border rounded-lg bg-white/20 border-white/30 hover:bg-white/30 backdrop-blur-sm">
                    <i class="mr-2 fa-solid fa-download"></i>Export Report
                </button>
            </div>
        </div>
    </div>
</div>

<div class="px-4 mx-auto">
    <!-- Safety Overview -->
    <div class="grid grid-cols-1 gap-4 mb-6 md:grid-cols-2 lg:grid-cols-4">
        <div class="p-4 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Incidents</p>
                    <p class="text-2xl font-bold text-gray-900 dark:text-white">23</p>
                </div>
                <div class="p-3 bg-red-100 rounded-lg dark:bg-red-900/30">
                    <i class="text-xl text-red-600 fa-solid fa-triangle-exclamation"></i>
                </div>
            </div>
            <div class="mt-2 text-sm text-green-600">
                <i class="fa-solid fa-arrow-down"></i> -15% from last month
            </div>
        </div>

        <div class="p-4 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Resolved Cases</p>
                    <p class="text-2xl font-bold text-gray-900 dark:text-white">19</p>
                </div>
                <div class="p-3 bg-green-100 rounded-lg dark:bg-green-900/30">
                    <i class="text-xl text-green-600 fa-solid fa-check-double"></i>
                </div>
            </div>
            <div class="mt-2 text-sm text-gray-500">
                82.6% resolution rate
            </div>
        </div>

        <div class="p-4 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Pending Review</p>
                    <p class="text-2xl font-bold text-gray-900 dark:text-white">4</p>
                </div>
                <div class="p-3 bg-yellow-100 rounded-lg dark:bg-yellow-900/30">
                    <i class="text-xl text-yellow-600 fa-solid fa-clock"></i>
                </div>
            </div>
            <div class="mt-2 text-sm text-yellow-600">
                <i class="fa-solid fa-exclamation"></i> Requires attention
            </div>
        </div>

        <div class="p-4 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Safety Score</p>
                    <p class="text-2xl font-bold text-gray-900 dark:text-white">94%</p>
                </div>
                <div class="p-3 rounded-lg bg-emerald-100 dark:bg-emerald-900/30">
                    <i class="text-xl text-emerald-600 fa-solid fa-shield-heart"></i>
                </div>
            </div>
            <div class="mt-2 text-sm text-green-600">
                <i class="fa-solid fa-arrow-up"></i> +2% from last month
            </div>
        </div>
    </div>

    <!-- Incidents Table -->
    <div class="p-6 mb-6 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Recent Incidents</h2>
            <div class="flex gap-2">
                <select class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600">
                    <option>All Types</option>
                    <option>Injury</option>
                    <option>Equipment</option>
                    <option>Weather</option>
                    <option>Wildlife</option>
                </select>
            </div>
        </div>
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead>
                    <tr class="border-b border-gray-200 dark:border-gray-700">
                        <th class="px-4 py-3 text-left">ID</th>
                        <th class="px-4 py-3 text-left">Trail</th>
                        <th class="px-4 py-3 text-left">Type</th>
                        <th class="px-4 py-3 text-left">Severity</th>
                        <th class="px-4 py-3 text-left">Date</th>
                        <th class="px-4 py-3 text-left">Status</th>
                        <th class="px-4 py-3 text-left">Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for i in 1..5 %}
                    <tr class="border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50">
                        <td class="px-4 py-3 text-sm text-gray-900 dark:text-white">#INC-2024-{{ 100+i }}</td>
                        <td class="px-4 py-3 text-sm text-gray-900 dark:text-white">Forest Trail {{ i }}</td>
                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                            {% if i == 1 %}
                                <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-red-800 bg-red-100 rounded-full dark:bg-red-900/30 dark:text-red-400">Injury</span>
                            {% elseif i == 2 %}
                                <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-yellow-800 bg-yellow-100 rounded-full dark:bg-yellow-900/30 dark:text-yellow-400">Equipment</span>
                            {% elseif i == 3 %}
                                <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-blue-800 bg-blue-100 rounded-full dark:bg-blue-900/30 dark:text-blue-400">Weather</span>
                            {% else %}
                                <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-purple-800 bg-purple-100 rounded-full dark:bg-purple-900/30 dark:text-purple-400">Wildlife</span>
                            {% endif %}
                        </td>
                        <td class="px-4 py-3 text-sm">
                            {% if i == 1 %}
                                <span class="text-red-600"><i class="text-xs fa-solid fa-circle"></i> High</span>
                            {% elseif i == 2 %}
                                <span class="text-yellow-600"><i class="text-xs fa-solid fa-circle"></i> Medium</span>
                            {% else %}
                                <span class="text-green-600"><i class="text-xs fa-solid fa-circle"></i> Low</span>
                            {% endif %}
                        </td>
                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Dec {{ 10+i }}, 2024</td>
                        <td class="px-4 py-3 text-sm">
                            {% if i == 1 or i == 3 %}
                                <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-yellow-800 bg-yellow-100 rounded-full dark:bg-yellow-900/30 dark:text-yellow-400">Pending</span>
                            {% else %}
                                <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-green-800 bg-green-100 rounded-full dark:bg-green-900/30 dark:text-green-400">Resolved</span>
                            {% endif %}
                        </td>
                        <td class="px-4 py-3 text-sm">
                            <button class="text-wellcare-600 hover:text-wellcare-800 dark:text-wellcare-400">View</button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Safety Alerts -->
    <div class="p-6 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
        <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">
            <i class="mr-2 fa-solid fa-bell"></i>Active Safety Alerts
        </h2>
        <div class="space-y-3">
            <div class="flex items-start p-4 border-l-4 border-red-500 rounded-r-lg bg-red-50 dark:bg-red-900/20">
                <i class="mt-1 mr-3 text-red-500 fa-solid fa-exclamation-triangle"></i>
                <div>
                    <h4 class="font-medium text-red-800 dark:text-red-400">Wildfire Warning - Mountain Trail</h4>
                    <p class="mt-1 text-sm text-red-700 dark:text-red-300">High fire risk conditions. Trail temporarily closed. Users advised to avoid area.</p>
                    <p class="mt-2 text-xs text-red-600 dark:text-red-400">Posted 2 hours ago</p>
                </div>
            </div>
            <div class="flex items-start p-4 border-l-4 border-yellow-500 rounded-r-lg bg-yellow-50 dark:bg-yellow-900/20">
                <i class="mt-1 mr-3 text-yellow-500 fa-solid fa-cloud-rain"></i>
                <div>
                    <h4 class="font-medium text-yellow-800 dark:text-yellow-400">Heavy Rain Expected - River Trail</h4>
                    <p class="mt-1 text-sm text-yellow-700 dark:text-yellow-300">Flash flood risk. Consider postponing trail activities until conditions improve.</p>
                    <p class="mt-2 text-xs text-yellow-600 dark:text-yellow-400">Posted 5 hours ago</p>
                </div>
            </div>
            <div class="flex items-start p-4 border-l-4 border-blue-500 rounded-r-lg bg-blue-50 dark:bg-blue-900/20">
                <i class="mt-1 mr-3 text-blue-500 fa-solid fa-info-circle"></i>
                <div>
                    <h4 class="font-medium text-blue-800 dark:text-blue-400">Trail Maintenance - Valley Path</h4>
                    <p class="mt-1 text-sm text-blue-700 dark:text-blue-300">Scheduled maintenance through Friday. Trail partially accessible.</p>
                    <p class="mt-2 text-xs text-blue-600 dark:text-blue-400">Posted 1 day ago</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
