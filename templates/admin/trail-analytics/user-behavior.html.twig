{% extends 'layouts/app.html.twig' %}

{% block title %}User Behavior Analytics - WellCare Connect Admin{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('trail-analytics-css') }}
{% endblock %}

{% block body %}
<div class="py-4 mb-6 -mx-4 -mt-4 bg-gradient-to-r from-teal-600 to-cyan-600">
    <div class="px-4 mx-auto">
        <div class="flex flex-col items-start justify-between md:flex-row md:items-center">
            <div>
                <h1 class="mb-1 text-xl font-bold text-white font-display">
                    <i class="mr-2 fa-solid fa-chart-pie"></i>User Behavior Analytics
                </h1>
                <p class="text-sm text-white/80">Understand user engagement and behavior patterns</p>
            </div>
            <div class="mt-4 md:mt-0">
                <select class="px-4 py-2 text-sm text-white border rounded-lg bg-white/20 border-white/30 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-white/50">
                    <option>Last 7 Days</option>
                    <option>Last 30 Days</option>
                    <option>Last 90 Days</option>
                    <option>This Year</option>
                </select>
            </div>
        </div>
    </div>
</div>

<div class="px-4 mx-auto">
    <!-- Behavior Metrics -->
    <div class="grid grid-cols-1 gap-4 mb-6 md:grid-cols-2 lg:grid-cols-4">
        <div class="p-4 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Avg. Session</p>
                    <p class="text-2xl font-bold text-gray-900 dark:text-white">24 min</p>
                </div>
                <div class="p-3 bg-teal-100 rounded-lg dark:bg-teal-900/30">
                    <i class="text-xl text-teal-600 fa-solid fa-clock"></i>
                </div>
            </div>
            <div class="mt-2 text-sm text-green-600">
                <i class="fa-solid fa-arrow-up"></i> +3.2 min from last month
            </div>
        </div>

        <div class="p-4 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Return Rate</p>
                    <p class="text-2xl font-bold text-gray-900 dark:text-white">68%</p>
                </div>
                <div class="p-3 bg-blue-100 rounded-lg dark:bg-blue-900/30">
                    <i class="text-xl text-blue-600 fa-solid fa-rotate-right"></i>
                </div>
            </div>
            <div class="mt-2 text-sm text-green-600">
                <i class="fa-solid fa-arrow-up"></i> +5% from last month
            </div>
        </div>

        <div class="p-4 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Feature Adoption</p>
                    <p class="text-2xl font-bold text-gray-900 dark:text-white">82%</p>
                </div>
                <div class="p-3 bg-purple-100 rounded-lg dark:bg-purple-900/30">
                    <i class="text-xl text-purple-600 fa-solid fa-rocket"></i>
                </div>
            </div>
            <div class="mt-2 text-sm text-green-600">
                <i class="fa-solid fa-arrow-up"></i> +8% from last month
            </div>
        </div>

        <div class="p-4 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Completion Rate</p>
                    <p class="text-2xl font-bold text-gray-900 dark:text-white">74%</p>
                </div>
                <div class="p-3 bg-green-100 rounded-lg dark:bg-green-900/30">
                    <i class="text-xl text-green-600 fa-solid fa-check-circle"></i>
                </div>
            </div>
            <div class="mt-2 text-sm text-green-600">
                <i class="fa-solid fa-arrow-up"></i> +2% from last month
            </div>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
        <!-- User Journey -->
        <div class="p-6 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
            <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">
                <i class="mr-2 fa-solid fa-route"></i>User Journey Funnel
            </h2>
            <div class="space-y-4">
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">App Open</span>
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">100%</span>
                    </div>
                    <div class="w-full h-3 bg-gray-200 rounded-full dark:bg-gray-700">
                        <div class="h-3 rounded-full bg-wellcare-500" style="width: 100%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Trail Search</span>
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">78%</span>
                    </div>
                    <div class="w-full h-3 bg-gray-200 rounded-full dark:bg-gray-700">
                        <div class="h-3 rounded-full bg-wellcare-light-500" style="width: 78%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Trail Selection</span>
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">62%</span>
                    </div>
                    <div class="w-full h-3 bg-gray-200 rounded-full dark:bg-gray-700">
                        <div class="h-3 rounded-full bg-cyan-500" style="width: 62%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Trail Start</span>
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">48%</span>
                    </div>
                    <div class="w-full h-3 bg-gray-200 rounded-full dark:bg-gray-700">
                        <div class="h-3 bg-teal-500 rounded-full" style="width: 48%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Publication</span>
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">35%</span>
                    </div>
                    <div class="w-full h-3 bg-gray-200 rounded-full dark:bg-gray-700">
                        <div class="h-3 bg-indigo-500 rounded-full" style="width: 35%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Popular Actions -->
        <div class="p-6 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
            <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">
                <i class="mr-2 fa-solid fa-bolt"></i>Most Popular Actions
            </h2>
            <div class="space-y-3">
                {% for action, percentage in {'Search trails nearby': 92, 'View trail details': 87, 'Save favorites': 74, 'Rate trail': 68, 'Share trail': 45, 'Create publication': 32} %}
                <div class="flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50">
                    <div class="flex items-center">
                        <i class="mr-3 text-wellcare-500 fa-solid fa-check-circle"></i>
                        <span class="text-sm font-medium text-gray-900 dark:text-white">{{ action }}</span>
                    </div>
                    <span class="text-sm font-bold text-wellcare-600 dark:text-wellcare-400">{{ percentage }}%</span>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Drop-off Analysis -->
    <div class="p-6 mt-6 bg-white border border-gray-100 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700">
        <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">
            <i class="mr-2 fa-solid fa-user-slash"></i>Drop-off Points Analysis
        </h2>
        <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
            <div class="p-4 border border-red-200 rounded-lg bg-red-50 dark:bg-red-900/20 dark:border-red-800">
                <div class="flex items-center mb-2">
                    <i class="mr-2 text-red-500 fa-solid fa-search"></i>
                    <h3 class="font-medium text-red-800 dark:text-red-400">Search → Selection</h3>
                </div>
                <p class="text-sm text-red-700 dark:text-red-300">22% drop-off</p>
                <p class="mt-2 text-xs text-red-600 dark:text-red-400">Users often don't find what they're looking for</p>
            </div>
            <div class="p-4 border border-yellow-200 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 dark:border-yellow-800">
                <div class="flex items-center mb-2">
                    <i class="mr-2 text-yellow-500 fa-solid fa-play"></i>
                    <h3 class="font-medium text-yellow-800 dark:text-yellow-400">Selection → Start</h3>
                </div>
                <p class="text-sm text-yellow-700 dark:text-yellow-300">24% drop-off</p>
                <p class="mt-2 text-xs text-yellow-600 dark:text-yellow-400">Users hesitate to begin the trail</p>
            </div>
            <div class="p-4 border border-orange-200 rounded-lg bg-orange-50 dark:bg-orange-900/20 dark:border-orange-800">
                <div class="flex items-center mb-2">
                    <i class="mr-2 text-orange-500 fa-solid fa-pen"></i>
                    <h3 class="font-medium text-orange-800 dark:text-orange-400">Completion → Publication</h3>
                </div>
                <p class="text-sm text-orange-700 dark:text-orange-300">28% drop-off</p>
                <p class="mt-2 text-xs text-orange-600 dark:text-orange-400">Low motivation to share experience</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
