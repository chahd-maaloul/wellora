{% extends 'base.html.twig' %}

{% block title %}Tableau de bord Nutritionniste - WellCare Connect{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('build/nutrition-css.css') }}">
{% endblock %}

{% block body_class %}bg-gray-50 dark:bg-gray-900{% endblock %}

{% block body %}
<div class="min-h-screen py-8">
    <div class="px-4 mx-auto max-w-7xl">
        {# Header #}
        <div class="flex flex-col gap-4 mb-8 lg:flex-row lg:items-center lg:justify-between">
            <div>
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white">Tableau de bord Nutritionniste</h1>
                <p class="mt-1 text-gray-500 dark:text-gray-400">Gestion complète de vos patients et suivis nutritionnels</p>
            </div>
            <div class="flex items-center gap-3">
                <form method="get" action="#" class="relative">
                    <input type="text" name="search" placeholder="Rechercher patients, dossiers..."
                           class="w-64 py-2 pl-10 pr-4 border border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    <i class="absolute text-gray-400 transform -translate-y-1/2 fas fa-search left-3 top-1/2"></i>
                </form>
                <a href="{{ path('nutrition_consultation') }}" class="p-2 text-white transition-colors rounded-lg bg-wellcare-500 hover:bg-wellcare-600" title="Nouvelle consultation">
                    <i class="fas fa-plus"></i>
                </a>
            </div>
        </div>

        {# Quick Stats #}
        <div class="grid grid-cols-1 gap-4 mb-8 md:grid-cols-2 lg:grid-cols-4">
            <div class="p-6 bg-white shadow-lg dark:bg-gray-800 rounded-2xl">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Patients actifs</p>
                        <p class="text-3xl font-bold text-gray-900 dark:text-white">12</p>
                        <p class="mt-1 text-sm text-green-500"><i class="mr-1 fas fa-arrow-up"></i>+3 ce mois</p>
                    </div>
                    <div class="flex items-center justify-center bg-blue-100 w-14 h-14 rounded-2xl dark:bg-blue-900/30">
                        <i class="text-2xl text-blue-500 fas fa-users"></i>
                    </div>
                </div>
            </div>
            <div class="p-6 bg-white shadow-lg dark:bg-gray-800 rounded-2xl">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Consultations aujourd'hui</p>
                        <p class="text-3xl font-bold text-gray-900 dark:text-white">5</p>
                        <p class="mt-1 text-sm text-gray-500">2 en attente</p>
                    </div>
                    <div class="flex items-center justify-center bg-green-100 w-14 h-14 rounded-2xl dark:bg-green-900/30">
                        <i class="text-2xl text-green-500 fas fa-calendar-check"></i>
                    </div>
                </div>
            </div>
            <div class="p-6 bg-white shadow-lg dark:bg-gray-800 rounded-2xl">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Plans actifs</p>
                        <p class="text-3xl font-bold text-gray-900 dark:text-white">8</p>
                        <p class="mt-1 text-sm text-amber-500">3 à revoir</p>
                    </div>
                    <div class="flex items-center justify-center w-14 h-14 rounded-2xl bg-amber-100 dark:bg-amber-900/30">
                        <i class="text-2xl fas fa-clipboard-list text-amber-500"></i>
                    </div>
                </div>
            </div>
            <div class="p-6 bg-white shadow-lg dark:bg-gray-800 rounded-2xl">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Messages non lus</p>
                        <p class="text-3xl font-bold text-gray-900 dark:text-white">3</p>
                        <p class="mt-1 text-sm text-gray-500">2 nécessitant une réponse</p>
                    </div>
                    <div class="flex items-center justify-center bg-purple-100 w-14 h-14 rounded-2xl dark:bg-purple-900/30">
                        <i class="text-2xl text-purple-500 fas fa-envelope"></i>
                    </div>
                </div>
            </div>
        </div>

        {# Main Content Grid #}
        <div class="grid grid-cols-1 gap-6 mb-8 lg:grid-cols-3">
            {# Today's Schedule #}
            <div class="p-6 bg-white shadow-lg lg:col-span-2 dark:bg-gray-800 rounded-2xl">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold text-gray-900 dark:text-white">Programme du jour</h2>
                    <a href="{{ path('nutrition_consultation') }}" class="text-sm font-medium text-wellcare-500 hover:text-wellcare-600">Voir tout</a>
                </div>
                <div class="space-y-4">
                    {# Consultation 1 #}
                    <a href="{{ path('nutritionniste_patient_view', { id: 1 }) }}" class="flex items-center gap-4 p-4 transition-colors rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50">
                        <div class="w-16 text-center">
                            <p class="text-sm font-medium text-gray-500">09:00</p>
                        </div>
                        <div class="w-1 h-12 rounded-full bg-blue-500"></div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 dark:text-white">Marie Dubois</h3>
                            <p class="text-sm text-gray-500">Consultation initiale</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700">Confirmée</span>
                            <button class="p-2 text-gray-400 transition-colors hover:text-wellcare-500">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </a>
                    {# Consultation 2 #}
                    <a href="{{ path('nutritionniste_patient_view', { id: 2 }) }}" class="flex items-center gap-4 p-4 transition-colors rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50">
                        <div class="w-16 text-center">
                            <p class="text-sm font-medium text-gray-500">10:30</p>
                        </div>
                        <div class="w-1 h-12 rounded-full bg-green-500"></div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 dark:text-white">Jean Martin</h3>
                            <p class="text-sm text-gray-500">Suivi mensuel</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700">En cours</span>
                            <button class="p-2 text-gray-400 transition-colors hover:text-wellcare-500">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </a>
                    {# Consultation 3 #}
                    <a href="{{ path('nutritionniste_patient_view', { id: 3 }) }}" class="flex items-center gap-4 p-4 transition-colors rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50">
                        <div class="w-16 text-center">
                            <p class="text-sm font-medium text-gray-500">14:00</p>
                        </div>
                        <div class="w-1 h-12 rounded-full bg-purple-500"></div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 dark:text-white">Sophie Bernard</h3>
                            <p class="text-sm text-gray-500">Analyse nutritionnelle</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700">Planifiée</span>
                            <button class="p-2 text-gray-400 transition-colors hover:text-wellcare-500">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </a>
                    {# Consultation 4 #}
                    <a href="{{ path('nutritionniste_patient_view', { id: 4 }) }}" class="flex items-center gap-4 p-4 transition-colors rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50">
                        <div class="w-16 text-center">
                            <p class="text-sm font-medium text-gray-500">15:30</p>
                        </div>
                        <div class="w-1 h-12 rounded-full bg-amber-500"></div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 dark:text-white">Pierre Lefebvre</h3>
                            <p class="text-sm text-gray-500">Réévaluation objectif</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700">Planifiée</span>
                            <button class="p-2 text-gray-400 transition-colors hover:text-wellcare-500">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </a>
                </div>
            </div>

            {# Quick Actions & Messages #}
            <div class="space-y-6">
                {# Quick Actions #}
                <div class="p-6 bg-white shadow-lg dark:bg-gray-800 rounded-2xl">
                    <h2 class="mb-4 text-lg font-bold text-gray-900 dark:text-white">Actions rapides</h2>
                    <div class="grid grid-cols-2 gap-3">
                        <a href="#" class="p-4 text-center text-blue-600 transition-colors rounded-xl bg-blue-50 dark:bg-blue-900/20 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30">
                            <i class="mb-2 text-xl fas fa-user-plus"></i>
                            <p class="text-sm font-medium">Nouveau patient</p>
                        </a>
                        <a href="#" class="p-4 text-center text-green-600 transition-colors rounded-xl bg-green-50 dark:bg-green-900/20 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/30">
                            <i class="mb-2 text-xl fas fa-utensils"></i>
                            <p class="text-sm font-medium">Créer plan</p>
                        </a>
                        <a href="#" class="p-4 text-center text-purple-600 transition-colors rounded-xl bg-purple-50 dark:bg-purple-900/20 dark:text-purple-400 hover:bg-purple-100 dark:hover:bg-purple-900/30">
                            <i class="mb-2 text-xl fas fa-chart-pie"></i>
                            <p class="text-sm font-medium">Analyses</p>
                        </a>
                        <a href="#" class="p-4 text-center transition-colors rounded-xl bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/30">
                            <i class="mb-2 text-xl fas fa-file-alt"></i>
                            <p class="text-sm font-medium">Rapports</p>
                        </a>
                    </div>
                </div>

                {# Recent Messages #}
                <div class="p-6 bg-white shadow-lg dark:bg-gray-800 rounded-2xl">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-bold text-gray-900 dark:text-white">Messages récents</h2>
                        <span class="px-2 py-1 text-xs font-medium text-red-600 bg-red-100 rounded-full">3 non lus</span>
                    </div>
                    <div class="space-y-3">
                        {# Message 1 #}
                        <a href="#" class="flex items-start gap-3 p-3 transition-colors rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50">
                            <div class="flex items-center justify-center flex-shrink-0 w-10 h-10 bg-gray-200 rounded-full dark:bg-gray-600">
                                <span class="text-sm font-medium text-gray-600 dark:text-gray-300">MD</span>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between">
                                    <h4 class="text-sm font-medium text-gray-900 truncate dark:text-white">Marie Dubois</h4>
                                    <span class="text-xs text-gray-400">Il y a 2h</span>
                                </div>
                                <p class="text-sm text-gray-500 truncate">Bonjour, j'ai une question sur...</p>
                            </div>
                            <div class="flex-shrink-0 w-2 h-2 rounded-full bg-wellcare-500"></div>
                        </a>
                        {# Message 2 #}
                        <a href="#" class="flex items-start gap-3 p-3 transition-colors rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50">
                            <div class="flex items-center justify-center flex-shrink-0 w-10 h-10 bg-gray-200 rounded-full dark:bg-gray-600">
                                <span class="text-sm font-medium text-gray-600 dark:text-gray-300">JM</span>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between">
                                    <h4 class="text-sm font-medium text-gray-900 truncate dark:text-white">Jean Martin</h4>
                                    <span class="text-xs text-gray-400">Il y a 5h</span>
                                </div>
                                <p class="text-sm text-gray-500 truncate">Merci pour le plan alimentaire...</p>
                            </div>
                            <div class="flex-shrink-0 w-2 h-2 rounded-full bg-wellcare-500"></div>
                        </a>
                        {# Message 3 #}
                        <a href="#" class="flex items-start gap-3 p-3 transition-colors rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50">
                            <div class="flex items-center justify-center flex-shrink-0 w-10 h-10 bg-gray-200 rounded-full dark:bg-gray-600">
                                <span class="text-sm font-medium text-gray-600 dark:text-gray-300">SB</span>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between">
                                    <h4 class="text-sm font-medium text-gray-900 truncate dark:text-white">Sophie Bernard</h4>
                                    <span class="text-xs text-gray-400">Hier</span>
                                </div>
                                <p class="text-sm text-gray-500 truncate">Les résultats sont très bien...</p>
                            </div>
                        </a>
                    </div>
                    <a href="#" class="w-full block py-2 mt-4 text-sm font-medium text-gray-700 transition-colors border border-gray-300 rounded-lg dark:border-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 text-center">
                        Voir tous les messages
                    </a>
                </div>
            </div>
        </div>

        {# Recent Patients & Activity #}
        <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
            {# Recent Patients #}
            <div class="p-6 bg-white shadow-lg dark:bg-gray-800 rounded-2xl">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold text-gray-900 dark:text-white">Patients récents</h2>
                    <a href="#" class="text-sm font-medium text-wellcare-500 hover:text-wellcare-600">Voir tout</a>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="text-sm text-left text-gray-500 dark:text-gray-400">
                                <th class="pb-3 font-medium">Patient</th>
                                <th class="pb-3 font-medium">Objectif</th>
                                <th class="pb-3 font-medium">Progression</th>
                                <th class="pb-3 font-medium">Statut</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100 dark:divide-gray-700">
                            {# Patient 1 #}
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                <td class="py-3">
                                    <a href="#" class="flex items-center gap-3">
                                        <div class="flex items-center justify-center w-10 h-10 bg-gray-200 rounded-full dark:bg-gray-600">
                                            <span class="text-sm font-medium text-gray-600 dark:text-gray-300">MD</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900 dark:text-white">Marie Dubois</p>
                                            <p class="text-sm text-gray-500">35 ans</p>
                                        </div>
                                    </a>
                                </td>
                                <td class="py-3">
                                    <p class="text-sm text-gray-900 dark:text-white">Perte de poids</p>
                                </td>
                                <td class="py-3">
                                    <div class="flex items-center gap-2">
                                        <div class="w-20 h-2 overflow-hidden bg-gray-200 rounded-full dark:bg-gray-700">
                                            <div class="h-full rounded-full bg-wellcare-500" style="width: 75%"></div>
                                        </div>
                                        <span class="text-xs font-medium text-gray-600 dark:text-gray-400">75%</span>
                                    </div>
                                </td>
                                <td class="py-3">
                                    <span class="px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700">Actif</span>
                                </td>
                            </tr>
                            {# Patient 2 #}
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                <td class="py-3">
                                    <a href="#" class="flex items-center gap-3">
                                        <div class="flex items-center justify-center w-10 h-10 bg-gray-200 rounded-full dark:bg-gray-600">
                                            <span class="text-sm font-medium text-gray-600 dark:text-gray-300">JM</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900 dark:text-white">Jean Martin</p>
                                            <p class="text-sm text-gray-500">42 ans</p>
                                        </div>
                                    </a>
                                </td>
                                <td class="py-3">
                                    <p class="text-sm text-gray-900 dark:text-white">Musculation</p>
                                </td>
                                <td class="py-3">
                                    <div class="flex items-center gap-2">
                                        <div class="w-20 h-2 overflow-hidden bg-gray-200 rounded-full dark:bg-gray-700">
                                            <div class="h-full rounded-full bg-wellcare-500" style="width: 60%"></div>
                                        </div>
                                        <span class="text-xs font-medium text-gray-600 dark:text-gray-400">60%</span>
                                    </div>
                                </td>
                                <td class="py-3">
                                    <span class="px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700">Actif</span>
                                </td>
                            </tr>
                            {# Patient 3 #}
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                <td class="py-3">
                                    <a href="#" class="flex items-center gap-3">
                                        <div class="flex items-center justify-center w-10 h-10 bg-gray-200 rounded-full dark:bg-gray-600">
                                            <span class="text-sm font-medium text-gray-600 dark:text-gray-300">SB</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900 dark:text-white">Sophie Bernard</p>
                                            <p class="text-sm text-gray-500">28 ans</p>
                                        </div>
                                    </a>
                                </td>
                                <td class="py-3">
                                    <p class="text-sm text-gray-900 dark:text-white">Équilibre alimentaire</p>
                                </td>
                                <td class="py-3">
                                    <div class="flex items-center gap-2">
                                        <div class="w-20 h-2 overflow-hidden bg-gray-200 rounded-full dark:bg-gray-700">
                                            <div class="h-full rounded-full bg-wellcare-500" style="width: 45%"></div>
                                        </div>
                                        <span class="text-xs font-medium text-gray-600 dark:text-gray-400">45%</span>
                                    </div>
                                </td>
                                <td class="py-3">
                                    <span class="px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700">Actif</span>
                                </td>
                            </tr>
                            {# Patient 4 #}
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                <td class="py-3">
                                    <a href="#" class="flex items-center gap-3">
                                        <div class="flex items-center justify-center w-10 h-10 bg-gray-200 rounded-full dark:bg-gray-600">
                                            <span class="text-sm font-medium text-gray-600 dark:text-gray-300">PL</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900 dark:text-white">Pierre Lefebvre</p>
                                            <p class="text-sm text-gray-500">50 ans</p>
                                        </div>
                                    </a>
                                </td>
                                <td class="py-3">
                                    <p class="text-sm text-gray-900 dark:text-white">Diabète type 2</p>
                                </td>
                                <td class="py-3">
                                    <div class="flex items-center gap-2">
                                        <div class="w-20 h-2 overflow-hidden bg-gray-200 rounded-full dark:bg-gray-700">
                                            <div class="h-full rounded-full bg-wellcare-500" style="width: 30%"></div>
                                        </div>
                                        <span class="text-xs font-medium text-gray-600 dark:text-gray-400">30%</span>
                                    </div>
                                </td>
                                <td class="py-3">
                                    <span class="px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-700">En attente</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            {# Activity Feed #}
            <div class="p-6 bg-white shadow-lg dark:bg-gray-800 rounded-2xl">
                <h2 class="mb-6 text-xl font-bold text-gray-900 dark:text-white">Activité récente</h2>
                <div class="space-y-4">
                    {# Activity 1 #}
                    <div class="flex items-start gap-4">
                        <div class="flex items-center justify-center flex-shrink-0 w-10 h-10 rounded-full bg-blue-500">
                            <i class="fas fa-user-plus text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-900 dark:text-white">
                                <span class="font-medium">Marie Dubois</span>
                                <span class="text-gray-500">est devenue votre patiente</span>
                            </p>
                            <p class="mt-1 text-xs text-gray-400">Il y a 2 heures</p>
                        </div>
                    </div>
                    {# Activity 2 #}
                    <div class="flex items-start gap-4">
                        <div class="flex items-center justify-center flex-shrink-0 w-10 h-10 rounded-full bg-green-500">
                            <i class="fas fa-check text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-900 dark:text-white">
                                <span class="font-medium">Jean Martin</span>
                                <span class="text-gray-500">a terminé son objectif de la semaine</span>
                            </p>
                            <p class="mt-1 text-xs text-gray-400">Il y a 4 heures</p>
                        </div>
                    </div>
                    {# Activity 3 #}
                    <div class="flex items-start gap-4">
                        <div class="flex items-center justify-center flex-shrink-0 w-10 h-10 rounded-full bg-purple-500">
                            <i class="fas fa-envelope text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-900 dark:text-white">
                                <span class="font-medium">Sophie Bernard</span>
                                <span class="text-gray-500">vous a envoyé un message</span>
                            </p>
                            <p class="mt-1 text-xs text-gray-400">Il y a 5 heures</p>
                        </div>
                    </div>
                    {# Activity 4 #}
                    <div class="flex items-start gap-4">
                        <div class="flex items-center justify-center flex-shrink-0 w-10 h-10 rounded-full bg-amber-500">
                            <i class="fas fa-clipboard-list text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-900 dark:text-white">
                                <span class="font-medium">Nouveau plan alimentaire</span>
                                <span class="text-gray-500">créé pour Pierre Lefebvre</span>
                            </p>
                            <p class="mt-1 text-xs text-gray-400">Hier</p>
                        </div>
                    </div>
                    {# Activity 5 #}
                    <div class="flex items-start gap-4">
                        <div class="flex items-center justify-center flex-shrink-0 w-10 h-10 rounded-full bg-red-500">
                            <i class="fas fa-calendar-plus text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-900 dark:text-white">
                                <span class="font-medium">Rendez-vous planifié</span>
                                <span class="text-gray-500">avec Marie Dubois</span>
                            </p>
                            <p class="mt-1 text-xs text-gray-400">Il y a 2 jours</p>
                        </div>
                    </div>
                </div>
                <button class="w-full py-2 mt-4 text-sm font-medium text-gray-700 transition-colors border border-gray-300 rounded-lg dark:border-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700">
                    Charger plus d'activité
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
{% endblock %}
