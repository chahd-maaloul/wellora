{% extends 'layouts/app.html.twig' %}

{% block title %}Planificateur de repas - WellCare Connect{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('nutrition-css') }}
{% endblock %}

{% block body_class %}bg-gray-50 dark:bg-gray-900{% endblock %}

{% block body %}
<div class="min-h-screen py-8">
    <div class="px-4 mx-auto max-w-7xl">
        {# Header #}
        <div class="flex flex-col gap-4 mb-8 md:flex-row md:items-center md:justify-between">
            <div>
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white">Planificateur de repas</h1>
                <p class="mt-1 text-gray-500 dark:text-gray-400">Planifiez vos repas pour la semaine</p>
            </div>
            <div class="flex items-center gap-3">
                <a href="{{ path('nutrition_dashboard') }}" 
                   class="inline-flex items-center px-4 py-2 text-gray-700 transition-colors border border-gray-300 rounded-lg dark:border-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700">
                    <i class="mr-2 fas fa-arrow-left"></i>
                    Retour
                </a>
            </div>
        </div>

        {# Quick Links #}
        <div class="flex flex-wrap gap-3 mb-6">
            <a href="{{ path('nutrition_quick_log') }}" 
               class="inline-flex items-center px-4 py-2 font-medium text-white transition-colors rounded-lg bg-wellcare-500 hover:bg-wellcare-600">
                <i class="mr-2 fas fa-plus"></i>Ajouter un repas
            </a>
            <a href="{{ path('nutrition_grocery_list') }}" 
               class="inline-flex items-center px-4 py-2 font-medium text-white transition-colors bg-blue-500 rounded-lg hover:bg-blue-600">
                <i class="mr-2 fas fa-shopping-cart"></i>Liste de courses
            </a>
            <a href="{{ path('nutrition_recipes') }}" 
               class="inline-flex items-center px-4 py-2 font-medium text-white transition-colors bg-green-500 rounded-lg hover:bg-green-600">
                <i class="mr-2 fas fa-book"></i>Recettes
            </a>
        </div>

        {# Week Days #}
        {% set days = ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'] %}
        {% set today = 1 %}
        
        <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4">
            {% for day in days %}
            {% set dayNum = loop.index %}
            {% set isToday = dayNum == today %}
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                {# Day Header #}
                <div class="p-4 {% if isToday %}bg-wellcare-500{% else %}bg-gray-100 dark:bg-gray-700{% endif %}">
                    <div class="flex items-center justify-between">
                        <h3 class="font-semibold {% if isToday %}text-white{% else %}text-gray-900 dark:text-white{% endif %}">
                            {{ day }}
                        </h3>
                        {% if isToday %}
                        <span class="px-2 py-1 text-xs font-medium bg-white text-wellcare-500 rounded-full">Aujourd'hui</span>
                        {% endif %}
                    </div>
                    <p class="text-sm {% if isToday %}text-white/80{% else %}text-gray-500 dark:text-gray-400{% endif %}">
                        {{ "now"|date_modify('+' ~ (loop.index0 - today) ~ ' days')|date('d/m/Y') }}
                    </p>
                </div>
                
                {# Meals for the Day #}
                <div class="p-4 space-y-3">
                    {# Breakfast #}
                    <div class="p-3 border border-orange-200 dark:border-gray-600 rounded-lg bg-orange-50 dark:bg-orange-900/20">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-orange-700 dark:text-orange-400">
                                <i class="mr-1 fas fa-mug-hot"></i>Petit-déjeuner
                            </span>
                            <a href="{{ path('nutrition_food_add', { meal: 'breakfast' }) }}" class="text-orange-500 hover:text-orange-700">
                                <i class="fas fa-plus"></i>
                            </a>
                        </div>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Cliquez pour ajouter</p>
                    </div>
                    
                    {# Lunch #}
                    <div class="p-3 border border-yellow-200 dark:border-gray-600 rounded-lg bg-yellow-50 dark:bg-yellow-900/20">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-yellow-700 dark:text-yellow-400">
                                <i class="mr-1 fas fa-utensils"></i>Déjeuner
                            </span>
                            <a href="{{ path('nutrition_food_add', { meal: 'lunch' }) }}" class="text-yellow-500 hover:text-yellow-700">
                                <i class="fas fa-plus"></i>
                            </a>
                        </div>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Cliquez pour ajouter</p>
                    </div>
                    
                    {# Dinner #}
                    <div class="p-3 border border-indigo-200 dark:border-gray-600 rounded-lg bg-indigo-50 dark:bg-indigo-900/20">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-indigo-700 dark:text-indigo-400">
                                <i class="mr-1 fas fa-moon"></i>Dîner
                            </span>
                            <a href="{{ path('nutrition_food_add', { meal: 'dinner' }) }}" class="text-indigo-500 hover:text-indigo-700">
                                <i class="fas fa-plus"></i>
                            </a>
                        </div>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Cliquez pour ajouter</p>
                    </div>
                    
                    {# Snacks #}
                    <div class="p-3 border border-pink-200 dark:border-gray-600 rounded-lg bg-pink-50 dark:bg-pink-900/20">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-pink-700 dark:text-pink-400">
                                <i class="mr-1 fas fa-cookie"></i>Collation
                            </span>
                            <a href="{{ path('nutrition_food_add', { meal: 'snacks' }) }}" class="text-pink-500 hover:text-pink-700">
                                <i class="fas fa-plus"></i>
                            </a>
                        </div>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Cliquez pour ajouter</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        {# Tips Section #}
        <div class="mt-8 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg">
            <h2 class="mb-4 text-xl font-bold text-gray-900 dark:text-white">
                <i class="mr-2 text-wellcare-500 fas fa-lightbulb"></i>
                Conseils pour une alimentation équilibrée
            </h2>
            <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
                <div class="p-4 bg-green-50 dark:bg-green-900/20 rounded-lg">
                    <h3 class="font-semibold text-green-700 dark:text-green-400 mb-2">
                        <i class="mr-2 fas fa-carrot"></i>Fibres
                    </h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">
                        Includez des légumes et des féculents complets dans chaque repas pour une bonne digestion.
                    </p>
                </div>
                <div class="p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                    <h3 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">
                        <i class="mr-2 fas fa-glass-water"></i>Hydratation
                    </h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">
                        Buvez au moins 8 verres d'eau par jour, de préférence entre les repas.
                    </p>
                </div>
                <div class="p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg">
                    <h3 class="font-semibold text-amber-700 dark:text-amber-400 mb-2">
                        <i class="mr-2 fas fa-clock"></i>Horaire
                    </h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">
                        Essayez de manger à des heures régulières pour maintenir votre métabolisme actif.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
